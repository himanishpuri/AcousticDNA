version: "3.8"

services:
   acousticdna:
      build: .
      container_name: acousticdna-server
      ports:
         - "8080:8080"
      environment:
         - ACOUSTIC_DB_PATH=/app/data/acousticdna.sqlite3
         - ACOUSTIC_TEMP_DIR=/app/temp
         - PORT=8080
      volumes:
         - ./data:/app/data
         - ./temp:/app/temp
      restart: unless-stopped
      healthcheck:
         test:
            [
               "CMD",
               "wget",
               "--quiet",
               "--tries=1",
               "--spider",
               "http://localhost:8080/health",
            ]
         interval: 30s
         timeout: 10s
         retries: 3
         start_period: 40s
